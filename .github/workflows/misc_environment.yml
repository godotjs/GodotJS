name: ğŸŒ³ Set Environment
on:
  workflow_call:

jobs:
  environment:
    name: ğŸŒ³ Set Environment
    runs-on: ubuntu-latest
    steps:
      - name: â¬ Checkout repository
        uses: actions/checkout@v4

      - name: ğŸ› ï¸ pnpm and build
        uses: ./.github/actions/pnpm-build

      - name: â¬†ï¸ Upload scripts/out
        uses: actions/upload-artifact@v4
        with:
          name: scripts-out
          path: ${{github.workspace}}/scripts/out
          retention-days: 10

      - name: â¬†ï¸ Upload tests/project
        uses: actions/upload-artifact@v4
        with:
          name: tests-project
          path: ${{github.workspace}}/tests/project/.godot/GodotJS
          retention-days: 10

      - name: â¬†ï¸ Upload editor/dist
        uses: actions/upload-artifact@v4
        with:
          name: editor-dist
          path: ${{github.workspace}}/scripts/editor/dist
          retention-days: 10

      - name: â¬†ï¸ Upload impl/web/js
        uses: actions/upload-artifact@v4
        with:
          name: impl-web-js
          path: ${{github.workspace}}/impl/web/js
          retention-days: 10
